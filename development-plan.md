# GatherQuiz 開発計画書

## 1. 開発の概要

ドキュメントに基づき、本アプリケーション「GatherQuiz」を以下の技術スタックと方針で開発する。

- **モノリポ構成**: フロントエンド、バックエンド、データベース関連のプロジェクトを一つのリポジトリ内で個別のディレクトリとして管理する。
- **技術スタック**:
    - **フロントエンド**: React (TypeScript) + Vite
        - UIフレームワーク: Material-UI (MUI) または Bootstrap
        - 状態管理: Zustand または React Context
        - ルーティング: React Router
    - **バックエンド**: Node.js (TypeScript) + Express
        - データベース: PostgreSQL または SQLite
        - ORM: Prisma
    - **パッケージ管理**: pnpm (ワークスペース機能を利用)

## 2. 開発フェーズ

開発を以下の3つの大きなフェーズに分けて進める。

### フェーズ1: プロジェクト基盤の構築 (約1日)

アプリケーションの土台となる開発環境と基本構造を整備する。

1.  **pnpmワークスペースの初期設定**
    - `pnpm-workspace.yaml` を設定し、モノリポの基本構造を作成する。
2.  **バックエンドプロジェクトのセットアップ (`packages/backend`)**
    - Express (TypeScript) のプロジェクトを初期化する。
    - Prisma を導入し、データベーススキーマ (`schema.prisma`) の初期定義を行う。
        - `Tournament` (大会), `Participant` (参加者), `Quiz` (問題) モデルを定義。
    - SQLite を利用して、ローカルでの手軽な開発環境を構築する。
3.  **フロントエンドプロジェクトのセットアップ (`packages/frontend`)**
    - React (TypeScript) + Vite でプロジェクトを初期化する。
    - React Router, Material-UI (MUI) を導入する。
    - バックエンドとの連携のため、`vite.config.ts` にプロキシ設定を追加する。
4.  **APIの基本設計と実装**
    - 大会作成 (`POST /api/tournaments`) のエンドポイントを一つ作成し、フロントエンドから呼び出せることを確認する。

### フェーズ2: 主要機能の実装 (約3-5日)

要件定義に基づき、主催者と参加者のコアとなる機能を実装する。

1.  **大会作成フローの実装**
    - **画面**:
        - `サービスTOPページ`
        - `大会作成ページ`
        - `大会作成完了ページ`
    - **API**:
        - 大会情報をDBに保存するAPI (`POST /api/tournaments`)
        - 作成された大会情報を取得するAPI (`GET /api/tournaments/:id`)
2.  **参加者フローの実装**
    - **画面**:
        - `大会ポータルページ` (主催者/参加者の分岐)
        - `問題作成・編集ページ`
    - **API**:
        - 参加者の登録/ログインAPI (`POST /api/tournaments/:id/participants`)
        - 問題の作成/更新API (`POST /api/quizzes`, `PUT /api/quizzes/:id`)
        - 参加者が作成すべき問題リストを取得するAPI
3.  **主催者管理フローの実装**
    - **画面**:
        - `主催者用 管理ページ`
    - **API**:
        - 主催者ログインAPI (`POST /api/tournaments/:id/login`)
        - 参加者の問題作成状況を取得するAPI (`GET /api/tournaments/:id/status`)
        - 大会情報を更新するAPI (`PUT /api/tournaments/:id`)

### フェーズ3: 大会実施機能と仕上げ (約2-3日)

大会当日に利用する画面と、全体の品質向上を行う。

1.  **大会実施フローの実装**
    - **画面**:
        - `問題選択ボードページ`
        - `問題表示ページ`
        - `解答表示ページ`
        - `大会終了ページ`
    - **API**:
        - 大会を開始状態に更新するAPI (`PATCH /api/tournaments/:id/start`)
        - 全問題のリストを取得するAPI (`GET /api/tournaments/:id/quizzes`)
2.  **共通機能の実装**
    - `エラーページ` の作成とルーティング設定。
    - 画像アップロード機能の実装 (バックエンドでのファイル保存、フロントエンドでのプレビュー)。
3.  **テストとリファクタリング**
    - 主要なAPIエンドポイントに対する単体テスト/結合テストを追加する。
    - コンポーネントの可読性やパフォーマンスを改善する。
    - 全画面のデザインを調整し、一貫性のあるUIを確保する。

## 3. マイルストーン

- **マイルストーン1 (フェーズ1完了)**:
    - 開発環境が整い、フロントエンドとバックエンドが疎通している状態。
    - `development-plan.md` としてこの計画書を保存する。
- **マイルストーン2 (フェーズ2完了)**:
    - 主催者が大会を作成でき、参加者が問題を作成できる状態。
- **マイルストーン3 (フェーズ3完了)**:
    - すべての画面と機能が実装され、一通りのデモが可能な状態。
